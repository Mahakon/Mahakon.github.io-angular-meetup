webpackJsonp(["main"],{"./src/$$_lazy_route_resource lazy recursive":function(e,t){function n(e){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+e+"'.")})}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="./src/$$_lazy_route_resource lazy recursive"},"./src/app/app-routing.module.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n("./node_modules/@angular/core/esm5/core.js"),s=n("./node_modules/@angular/router/esm5/router.js"),r=n("./src/app/chat/main-chat/main-chat.component.ts"),a=n("./src/app/auth/auth.component.ts"),c=n("./src/app/auth/auth.guard.ts"),i=n("./src/app/chat/chat.guard.ts"),p=n("./src/app/chat/chat.resolver.ts"),u=this&&this.__decorate||function(e,t,n,o){var s,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(a=(r<3?s(a):r>3?s(t,n,a):s(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},l=[{path:"auth",component:a.a,canActivate:[c.a]},{path:"chat",component:r.a,canActivate:[i.a],resolve:{messageList:p.a}},{path:"",redirectTo:"auth",pathMatch:"full"}],f=function(){function e(){}return e=u([Object(o.K)({exports:[s.c],imports:[s.c.forRoot(l,{enableTracing:!1})]})],e)}()},"./src/app/app.component.html":function(e,t){e.exports="<router-outlet></router-outlet>\n"},"./src/app/app.component.less":function(e,t){e.exports=""},"./src/app/app.component.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var o=n("./node_modules/@angular/core/esm5/core.js"),s=this&&this.__decorate||function(e,t,n,o){var s,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(a=(r<3?s(a):r>3?s(t,n,a):s(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},r=function(){function e(){}return e=s([Object(o.n)({selector:"app-root",template:n("./src/app/app.component.html"),styles:[n("./src/app/app.component.less")]})],e)}()},"./src/app/app.module.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return _});var o=n("./node_modules/@angular/platform-browser/esm5/platform-browser.js"),s=n("./node_modules/@angular/core/esm5/core.js"),r=n("./src/app/app.component.ts"),a=n("./src/app/app-routing.module.ts"),c=n("./node_modules/@angular/common/esm5/http.js"),i=n("./node_modules/@angular/forms/esm5/forms.js"),p=n("./node_modules/@angular/platform-browser/esm5/animations.js"),u=n("./src/app/chat/main-chat/main-chat.component.ts"),l=n("./node_modules/@angular/material/esm5/material.es5.js"),f=n("./src/app/chat/chat-toolbar/chat-toolbar.component.ts"),d=n("./src/app/chat/message-input/message-input.component.ts"),m=n("./src/app/services/user.service.ts"),h=n("./src/app/chat/message/message.component.ts"),g=n("./src/app/services/websocet.service.ts"),b=n("./src/app/services/chat.service.ts"),v=n("./src/app/auth/auth.component.ts"),y=n("./src/app/auth/auth.guard.ts"),x=n("./src/app/chat/chat.guard.ts"),j=n("./src/app/chat/chat.resolver.ts"),w=this&&this.__decorate||function(e,t,n,o){var s,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(a=(r<3?s(a):r>3?s(t,n,a):s(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},_=function(){function e(){}return e=w([Object(s.K)({declarations:[r.a,u.a,f.a,d.a,h.a,v.a],imports:[o.a,i.d,a.a,c.b,i.i,i.d,p.a,l.f,l.a,l.c,l.e,l.d,l.b],providers:[m.a,g.a,b.b,y.a,x.a,j.a],bootstrap:[r.a]})],e)}()},"./src/app/auth/auth.component.html":function(e,t){e.exports='<div class="form-container">\n  <form class="login-form"\n        [formGroup]="authForm">\n    <mat-form-field class="login">\n      <input matInput\n             placeholder="login"\n             formControlName="login"\n             required="required">\n      <mat-error *ngIf="authForm.invalid">\n        {{getErrorMessage()}}\n      </mat-error>\n    </mat-form-field>\n  </form>\n  <button mat-button\n          color="primary"\n          class="chat-button"\n          [disabled]="authForm.invalid"\n          (click)="addUser()">\n    Go Chating\n  </button>\n</div>\n'},"./src/app/auth/auth.component.less":function(e,t){e.exports=".form-container {\n  margin: 140px auto;\n  background: #FFD4AE;\n  border-radius: 2px;\n  padding: 10px;\n  max-width: 400px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n}\n.form-container .login-form .login {\n  width: 100%;\n  font-size: 24px;\n}\n.form-container .chat-button {\n  margin-top: 10px;\n  font-size: 24px;\n}\n"},"./src/app/auth/auth.component.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n("./node_modules/@angular/core/esm5/core.js"),s=n("./node_modules/@angular/forms/esm5/forms.js"),r=n("./src/app/services/user.service.ts"),a=n("./node_modules/rxjs/_esm5/operators.js"),c=n("./node_modules/@angular/router/esm5/router.js"),i=this&&this.__decorate||function(e,t,n,o){var s,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(a=(r<3?s(a):r>3?s(t,n,a):s(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t,n){this.router=e,this.formBuilder=t,this.userService=n}return e.prototype.ngOnInit=function(){this.createForm(),this.checkUserLogin()},e.prototype.checkUserLogin=function(){var e=this,t=this.authForm.get("login");t.valueChanges.pipe(Object(a.a)(500),Object(a.b)(function(t){return e.userService.checkIsLogin(t)})).subscribe(function(e){e.isLogin&&t.setErrors({isLogin:!0})},function(e){console.log(e)})},e.prototype.addUser=function(){var e=this;this.userService.addUser(this.authForm.get("login").value).subscribe(function(t){e.userService.user=t,e.router.navigateByUrl("/chat")},function(e){console.log(e)})},e.prototype.getErrorMessage=function(){var e=this.authForm.get("login").errors;return e.required?"You must enter a value":e.isLogin?"Login is already used":""},e.prototype.createForm=function(){this.authForm=this.formBuilder.group({login:["",s.j.required]})},e=i([Object(o.n)({selector:"app-auth",template:n("./src/app/auth/auth.component.html"),styles:[n("./src/app/auth/auth.component.less")]}),p("design:paramtypes",[c.b,s.b,r.a])],e)}()},"./src/app/auth/auth.guard.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var o=n("./node_modules/@angular/core/esm5/core.js"),s=n("./node_modules/@angular/router/esm5/router.js"),r=n("./src/app/services/user.service.ts"),a=this&&this.__decorate||function(e,t,n,o){var s,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(a=(r<3?s(a):r>3?s(t,n,a):s(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=function(){function e(e,t){this.router=e,this.userService=t}return e.prototype.canActivate=function(e,t){return void 0!==this.userService.user?(console.log(this.userService.user),this.router.navigateByUrl("/chat"),!1):this.isValidSession()},e.prototype.isValidSession=function(){var e=this;return new Promise(function(t,n){e.userService.checkSession().subscribe(function(n){console.log(n),e.userService.user=n,e.router.navigateByUrl("/chat"),t(!1)},function(e){console.log(e),t(!0)})})},e=a([Object(o.C)(),c("design:paramtypes",[s.b,r.a])],e)}()},"./src/app/chat/chat-toolbar/chat-toolbar.component.html":function(e,t){e.exports='<mat-toolbar class="chat-toolbar">\n  <span class="title">{{login}}</span>\n</mat-toolbar>\n'},"./src/app/chat/chat-toolbar/chat-toolbar.component.less":function(e,t){e.exports=":host .chat-toolbar {\n  background-color: #FFF9EF;\n  background-image: -webkit-gradient(linear, right bottom, left top, from(#FFF9EF), color-stop(#FFD7B7), color-stop(#FFB3A5), color-stop(#FF8B9D), to(#FF6F9C));\n  background-image: linear-gradient(to top left, #FFF9EF, #FFD7B7, #FFB3A5, #FF8B9D, #FF6F9C);\n  background-repeat: no-repeat;\n  background-position: right top;\n  background-attachment: fixed;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n}\n:host .chat-toolbar .title {\n  font-size: 24px;\n}\n"},"./src/app/chat/chat-toolbar/chat-toolbar.component.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n("./node_modules/@angular/core/esm5/core.js"),s=this&&this.__decorate||function(e,t,n,o){var s,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(a=(r<3?s(a):r>3?s(t,n,a):s(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(){}return e.prototype.ngOnInit=function(){},s([Object(o.F)(),r("design:type",String)],e.prototype,"login",void 0),e=s([Object(o.n)({selector:"app-chat-toolbar",template:n("./src/app/chat/chat-toolbar/chat-toolbar.component.html"),styles:[n("./src/app/chat/chat-toolbar/chat-toolbar.component.less")]}),r("design:paramtypes",[])],e)}()},"./src/app/chat/chat.guard.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var o=n("./node_modules/@angular/core/esm5/core.js"),s=n("./node_modules/@angular/router/esm5/router.js"),r=n("./src/app/services/user.service.ts"),a=this&&this.__decorate||function(e,t,n,o){var s,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(a=(r<3?s(a):r>3?s(t,n,a):s(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=function(){function e(e,t){this.router=e,this.userService=t}return e.prototype.canActivate=function(e,t){return void 0!==this.userService.user||this.isValidSession()},e.prototype.isValidSession=function(){var e=this;return new Promise(function(t,n){e.userService.checkSession().subscribe(function(n){console.log(n),e.userService.user=n,t(!0)},function(n){console.log(n),e.router.navigateByUrl("/auth"),t(!1)})})},e=a([Object(o.C)(),c("design:paramtypes",[s.b,r.a])],e)}()},"./src/app/chat/chat.resolver.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n("./node_modules/@angular/core/esm5/core.js"),s=n("./src/app/services/user.service.ts"),r=this&&this.__decorate||function(e,t,n,o){var s,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(a=(r<3?s(a):r>3?s(t,n,a):s(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e){this.userService=e}return e.prototype.resolve=function(){return this.userService.getMessageList()},e=r([Object(o.C)(),a("design:paramtypes",[s.a])],e)}()},"./src/app/chat/main-chat/main-chat.component.html":function(e,t){e.exports='<app-chat-toolbar [login]="user.login">\n</app-chat-toolbar>\n<div class="working-area">\n  <div class="chat-container">\n    <div class="message-container" #scrollMe [scrollTop]="scrollMe.scrollHeight">\n      <app-message *ngFor="let message of messageList"\n                   [message]="message"\n                   [user]="user">\n      </app-message>\n    </div>\n    <app-message-input (addNewMessage)="addNewMessage($event)">\n    </app-message-input>\n  </div>\n</div>\n'},"./src/app/chat/main-chat/main-chat.component.less":function(e,t){e.exports=":host {\n  height: 100%;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n}\n:host .working-area {\n  -webkit-box-flex: 1;\n      -ms-flex: 1 1 100%;\n          flex: 1 1 100%;\n  overflow-y: auto;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n:host .working-area .chat-container {\n  max-width: 800px;\n  min-width: 200px;\n  margin: 0 auto 0 auto;\n  background: white;\n  -webkit-box-flex: 1;\n      -ms-flex: 1 1 auto;\n          flex: 1 1 auto;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  -webkit-box-pack: end;\n      -ms-flex-pack: end;\n          justify-content: flex-end;\n  padding: 10px;\n  min-height: 0;\n}\n:host .working-area .chat-container .message-container {\n  padding: 20px 40px 20px 40px;\n  min-height: 0px;\n  overflow-y: auto;\n}\n"},"./src/app/chat/main-chat/main-chat.component.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n("./node_modules/@angular/core/esm5/core.js"),s=n("./src/app/services/user.service.ts"),r=n("./src/app/services/chat.service.ts"),a=n("./node_modules/@angular/router/esm5/router.js"),c=this&&this.__decorate||function(e,t,n,o){var s,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(a=(r<3?s(a):r>3?s(t,n,a):s(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t,n){this.userService=e,this.chatService=t,this.route=n}return e.prototype.ngOnInit=function(){var e=this;this.user=this.userService.user,this.messageList=this.chatService.messageList,this.messageList=this.route.snapshot.data.messageList,this.subscriptionToAddNewMessage=this.chatService.getSubscriptionToEvent(r.a.ADD).subscribe(function(t){e.getNewMessage(t)})},e.prototype.ngOnDestroy=function(){this.subscriptionToAddNewMessage.unsubscribe()},e.prototype.addNewMessage=function(e){this.chatService.sendEvent(r.a.ADD,{content:e,userId:this.user.id})},e.prototype.getNewMessage=function(e){this.messageList.push(e)},e=c([Object(o.n)({selector:"app-main-chat",template:n("./src/app/chat/main-chat/main-chat.component.html"),styles:[n("./src/app/chat/main-chat/main-chat.component.less")]}),i("design:paramtypes",[s.a,r.b,a.a])],e)}()},"./src/app/chat/message-input/message-input.component.html":function(e,t){e.exports='<div class="input-container">\n  <a mat-icon-button\n     class="__bottom-location"\n     href="https://github.com/Mahakon/"\n     target="_blank">\n    <mat-icon>favorite</mat-icon>\n  </a>\n  <div class="message"\n       contentEditable="true"\n       [textContent]="content"\n       (input)="handleInputMessage($event)"\n       (keyup.enter)="handleNewMessage()">\n    {{content}}\n  </div>\n  <button (click)="handleNewMessage()"\n          mat-icon-button\n          class="__bottom-location">\n    <mat-icon>send</mat-icon>\n  </button>\n</div>\n'},"./src/app/chat/message-input/message-input.component.less":function(e,t){e.exports=":host .input-container {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n:host .input-container .__bottom-location {\n  margin: auto auto 0 auto;\n}\n:host .input-container .message {\n  word-wrap: break-word;\n  border-radius: 2px;\n  border: 1px solid black;\n  width: 740px;\n  max-width: 740px;\n  min-width: 140px;\n  min-height: 40px;\n  padding: 4px;\n  font-size: 20px;\n}\n"},"./src/app/chat/message-input/message-input.component.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n("./node_modules/@angular/core/esm5/core.js"),s=this&&this.__decorate||function(e,t,n,o){var s,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(a=(r<3?s(a):r>3?s(t,n,a):s(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(){this.addNewMessage=new o.x}return e.prototype.ngOnInit=function(){},e.prototype.handleNewMessage=function(){this.addNewMessage.emit(this.content),this.content=""},e.prototype.handleInputMessage=function(e){var t=e.target;this.content=t.textContent},s([Object(o.R)(),r("design:type",o.x)],e.prototype,"addNewMessage",void 0),e=s([Object(o.n)({selector:"app-message-input",template:n("./src/app/chat/message-input/message-input.component.html"),styles:[n("./src/app/chat/message-input/message-input.component.less")]}),r("design:paramtypes",[])],e)}()},"./src/app/chat/message/message.component.html":function(e,t){e.exports='<div class="message"\n     [class.anouther-user]="message.userId!==user.id">\n  <div class="text" [ngStyle]="getRandomColor()">{{message.content}}</div>\n  <div class="icon-view">\n    <mat-icon class="icon">person</mat-icon>\n    <span>{{message.login}}</span>\n  </div>\n</div>\n\n'},"./src/app/chat/message/message.component.less":function(e,t){e.exports=":host {\n  margin: 5px;\n}\n:host .message {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: end;\n      -ms-flex-pack: end;\n          justify-content: flex-end;\n}\n:host .message .icon-view {\n  position: relative;\n}\n:host .message .icon-view .icon {\n  margin: 2px 10px 2px 2px;\n}\n:host .message .icon-view .icon + span {\n  display: none;\n  background: black;\n  opacity: 0.6;\n  color: white;\n  right: 62%;\n  top: 60%;\n  position: absolute;\n}\n:host .message .icon-view .icon:hover + span,\n:host .message .icon-view .icon:focus + span {\n  cursor: pointer;\n  display: inline-block;\n}\n:host .message .text {\n  display: inline;\n  max-width: 600px;\n  min-width: 100px;\n  word-wrap: break-word;\n  border-radius: 4px;\n  border-bottom-right-radius: 0;\n  background: none;\n  padding: 4px;\n  min-height: 24px;\n  font-size: 20px;\n}\n:host .anouther-user {\n  -webkit-box-pack: start;\n      -ms-flex-pack: start;\n          justify-content: flex-start;\n}\n:host .anouther-user .icon-view {\n  -webkit-box-ordinal-group: 2;\n      -ms-flex-order: 1;\n          order: 1;\n}\n:host .anouther-user .text {\n  -webkit-box-ordinal-group: 3;\n      -ms-flex-order: 2;\n          order: 2;\n}\n"},"./src/app/chat/message/message.component.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n("./node_modules/@angular/core/esm5/core.js"),s=n("./node_modules/randomcolor/randomColor.js"),r=(n.n(s),this&&this.__decorate||function(e,t,n,o){var s,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(a=(r<3?s(a):r>3?s(t,n,a):s(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a}),a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(){}return e.prototype.ngOnInit=function(){},e.prototype.getRandomColor=function(){return{background:s({hue:"yellow",luminosity:"light",seed:this.message.userId})}},r([Object(o.F)(),a("design:type",Object)],e.prototype,"message",void 0),r([Object(o.F)(),a("design:type",Object)],e.prototype,"user",void 0),e=r([Object(o.n)({selector:"app-message",template:n("./src/app/chat/message/message.component.html"),styles:[n("./src/app/chat/message/message.component.less")]}),a("design:paramtypes",[])],e)}()},"./src/app/config.ts":function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"c",function(){return s}),n.d(t,"a",function(){return r});var o="http://127.0.0.1:3000/api/",s="ws://127.0.0.1:3000/api/chat/connection/",r="http://127.0.0.1:3000"},"./src/app/services/chat.service.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return f});var o,s=n("./node_modules/@angular/core/esm5/core.js"),r=n("./node_modules/events/events.js"),a=(n.n(r),n("./node_modules/rxjs/_esm5/add/operator/map.js"),n("./node_modules/rxjs/_esm5/observable/fromEvent.js")),c=n("./src/app/services/websocet.service.ts"),i=n("./src/app/config.ts"),p=n("./src/app/services/user.service.ts"),u=this&&this.__decorate||function(e,t,n,o){var s,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(a=(r<3?s(a):r>3?s(t,n,a):s(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};!function(e){e.ADD="ADD",e.DELETE="DELETE",e.LIKE="LIKE"}(o||(o={}));var f=function(){function e(e,t){this.websocketService=e,this.userService=t,this.eventEmitter=new r.EventEmitter,this.openConnection(),this.createEvents(),this.messageList=[]}return e.prototype.openConnection=function(){this.websocket=this.websocketService.connect(i.c+this.userService.user.id).map(function(e){return JSON.parse(e.data)})},e.prototype.createEvents=function(){var e=this;this.websocket.subscribe(function(t){t.event===o.ADD&&(console.log("emit"+o.ADD),e.eventEmitter.emit(o.ADD,t.data)),void 0!==t[o.DELETE]&&(console.log("emit"+o.DELETE),e.eventEmitter.emit(o.DELETE,t[o.DELETE])),void 0!==t[o.LIKE]&&(console.log("emit"+o.LIKE),e.eventEmitter.emit(o.LIKE,t[o.LIKE]))},function(e){console.log(e)},function(){e.websocketService.opening&&(e.openConnection(),e.createEvents())})},e.prototype.getSubscriptionToEvent=function(e){return Object(a.a)(this.eventEmitter,e)},e.prototype.sendEvent=function(e,t){this.websocket.next({event:e,data:t})},e=u([Object(s.C)(),l("design:paramtypes",[c.a,p.a])],e)}()},"./src/app/services/user.service.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var o=n("./node_modules/@angular/core/esm5/core.js"),s=n("./node_modules/@angular/common/esm5/http.js"),r=n("./src/app/config.ts"),a=this&&this.__decorate||function(e,t,n,o){var s,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(a=(r<3?s(a):r>3?s(t,n,a):s(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=function(){function e(e){this.http=e,this.headers=new s.c({"Access-Control-Allow-Credentials":"true","Access-Control-Allow-Origin":r.a,"Access-Control-Allow-Methods":"*","Access-Control-Allow-Headers":["Content-Type","*"]}),this.options={headers:this.headers,withCredentials:!0}}return e.prototype.checkIsLogin=function(e){var t=new FormData,n=r.b+"auth/check";return t.append("login",e),this.http.post(n,t)},e.prototype.addUser=function(e){var t=new FormData,n=r.b+"auth";return t.append("login",e),this.http.post(n,t,this.options)},e.prototype.checkSession=function(){var e=r.b+"session/check";return this.http.get(e,this.options)},e.prototype.getMessageList=function(){var e=r.b+"chat/get/messages";return this.http.get(e)},e=a([Object(o.C)(),c("design:paramtypes",[s.a])],e)}()},"./src/app/services/websocet.service.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var o=n("./node_modules/@angular/core/esm5/core.js"),s=n("./node_modules/rxjs/_esm5/Subject.js"),r=n("./node_modules/rxjs/_esm5/Observable.js"),a=this&&this.__decorate||function(e,t,n,o){var s,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(a=(r<3?s(a):r>3?s(t,n,a):s(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=function(){function e(){this.subject=new s.a,this.ws=void 0,this.opening=!0}return e.prototype.connect=function(e){return this.subject=this.create(e),console.log("Successfully connected: "+e),this.subject},e.prototype.create=function(e){var t=this;this.ws=new WebSocket(e);var n=r.a.create(function(e){return t.ws.onmessage=e.next.bind(e),t.ws.onerror=e.error.bind(e),t.ws.onclose=e.complete.bind(e),t.ws.close.bind(t.ws)}),o={next:function(e){t.ws.readyState===WebSocket.OPEN&&t.ws.send(JSON.stringify(e))}};return s.a.create(o,n)},e.prototype.close=function(){void 0!==this.ws&&(this.ws.close(),console.log("WebSocket closed"))},e=a([Object(o.C)(),c("design:paramtypes",[])],e)}()},"./src/environments/environment.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o={production:!1}},"./src/main.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/@angular/core/esm5/core.js"),s=n("./node_modules/@angular/platform-browser-dynamic/esm5/platform-browser-dynamic.js"),r=n("./src/app/app.module.ts"),a=n("./src/environments/environment.ts"),c=n("./node_modules/hammerjs/hammer.js");n.n(c);a.a.production&&Object(o._17)(),Object(s.a)().bootstrapModule(r.a).catch(function(e){return console.log(e)})},0:function(e,t,n){e.exports=n("./src/main.ts")}},[0]);
//# sourceMappingURL=main.bundle85.js.map